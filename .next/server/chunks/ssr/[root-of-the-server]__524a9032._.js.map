{"version":3,"sources":["turbopack:///[project]/node_modules/next/src/build/webpack/loaders/next-flight-loader/server-reference.ts","turbopack:///[project]/node_modules/next/src/build/webpack/loaders/next-flight-loader/action-validate.ts","turbopack:///[project]/components/ui/badge.tsx","turbopack:///[project]/components/ui/alert.tsx","turbopack:///[project]/components/ui/separator.tsx/__nextjs-internal-proxy.mjs","turbopack:///[project]/lib/utils/date.ts","turbopack:///[project]/lib/utils/supabase.ts","turbopack:///[project]/components/ui/input.tsx","turbopack:///[project]/app/(admin)/admin/supporters/actions.ts","turbopack:///[project]/lib/validators/supporter.ts","turbopack:///[project]/.next-internal/server/app/(admin)/admin/supporters/page/actions.js (server actions loader)"],"sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\nexport { registerServerReference } from 'react-server-dom-webpack/server'\n","// This function ensures that all the exported values are valid server actions,\n// during the runtime. By definition all actions are required to be async\n// functions, but here we can only check that they are functions.\nexport function ensureServerEntryExports(actions: any[]) {\n  for (let i = 0; i < actions.length; i++) {\n    const action = actions[i]\n    if (typeof action !== 'function') {\n      throw new Error(\n        `A \"use server\" file can only export async functions, found ${typeof action}.\\nRead more: https://nextjs.org/docs/messages/invalid-use-server-value`\n      )\n    }\n  }\n}\n","import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90\",\n        destructive:\n          \"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"span\"> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"span\"\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nexport { Badge, badgeVariants }\n","import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-card text-card-foreground\",\n        destructive:\n          \"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction Alert({\n  className,\n  variant,\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof alertVariants>) {\n  return (\n    <div\n      data-slot=\"alert\"\n      role=\"alert\"\n      className={cn(alertVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nfunction AlertTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"alert-title\"\n      className={cn(\n        \"col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction AlertDescription({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"alert-description\"\n      className={cn(\n        \"text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Alert, AlertTitle, AlertDescription }\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Separator = registerClientReference(\n    function() { throw new Error(\"Attempted to call Separator() from the server but Separator is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/separator.tsx\",\n    \"Separator\",\n);\n","import { DEFAULT_LANGUAGE, type SupportedLanguage } from '@/lib/i18n/config';\n\nexport function formatDate(value: string | number | Date, language: SupportedLanguage = DEFAULT_LANGUAGE) {\n  if (!value) {\n    return '';\n  }\n\n  const date = value instanceof Date ? value : new Date(value);\n\n  if (Number.isNaN(date.getTime())) {\n    return '';\n  }\n\n  return new Intl.DateTimeFormat(language, {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n  }).format(date);\n}\n","/**\n * Supabase ILIKE 검색 시 %, _ 등 메타문자를 이스케이프합니다.\n */\nexport function escapeIlikePattern(input: string) {\n  return input.replace(/[%_]/g, (match) => `\\\\${match}`);\n}\n","import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Input({ className, type, ...props }: React.ComponentProps<\"input\">) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n","'use server';\n\nimport { revalidatePath } from 'next/cache';\n\nimport { requireRole } from '@/lib/auth/session';\nimport { createSupabaseServerClient } from '@/lib/supabase/server';\nimport { supporterUpsertSchema } from '@/lib/validators/supporter';\nimport { logError } from '@/lib/monitoring/logger';\nimport type { Database } from '@/types/supabase';\n\nexport async function upsertSupporterAction(formData: FormData): Promise<void> {\n  await requireRole('admin');\n\n  const payload = supporterUpsertSchema.safeParse({\n    id: formData.get('id')?.toString() || undefined,\n    name: formData.get('name'),\n    amount: formData.get('amount'),\n    supportedOn: formData.get('supportedOn'),\n    memo: formData.get('memo')?.toString() ?? undefined,\n  });\n\n  if (!payload.success) {\n    logError('후원자 저장 검증 실패', { issues: payload.error.issues });\n    return;\n  }\n\n  const supabase = await createSupabaseServerClient();\n  const values = payload.data;\n\n  const upsertPayload = {\n    id: values.id,\n    name: values.name.trim(),\n    amount: Number(values.amount),\n    supported_on: values.supportedOn,\n    memo: values.memo ? values.memo.trim() : null,\n  } satisfies Database['public']['Tables']['supporters']['Insert'];\n\n  const { error } = await supabase\n    .from('supporters')\n    .upsert(upsertPayload, { onConflict: 'id' });\n\n  if (error) {\n    logError('후원자 저장 실패', { error, supporterId: values.id });\n    return;\n  }\n\n  revalidatePath('/admin/supporters');\n}\n\nexport async function deleteSupporterAction(formData: FormData): Promise<void> {\n  await requireRole('admin');\n\n  const supporterId = formData.get('supporterId');\n\n  if (typeof supporterId !== 'string') {\n    logError('후원자 삭제 실패 - 잘못된 supporterId', { supporterId });\n    return;\n  }\n\n  const supabase = await createSupabaseServerClient();\n  const { error } = await supabase.from('supporters').delete().eq('id', supporterId);\n\n  if (error) {\n    logError('후원자 삭제 실패', { error, supporterId });\n    return;\n  }\n\n  revalidatePath('/admin/supporters');\n}\n","import { z } from 'zod';\n\nexport const supporterUpsertSchema = z.object({\n  id: z.string().uuid().optional(),\n  name: z.string().min(2, '후원자 이름을 입력해주세요.'),\n  amount: z\n    .string()\n    .min(1, '후원 금액을 입력해주세요.')\n    .refine((value) => !Number.isNaN(Number(value)), '유효한 금액을 입력해주세요.'),\n  supportedOn: z.string().min(1, '후원 날짜를 입력해주세요.'),\n  memo: z.string().optional(),\n});\n\nexport type SupporterUpsertValues = z.infer<typeof supporterUpsertSchema>;\n","export {upsertSupporterAction as '409bbaab1f01ae6229570a1bf32ffb03654f227582'} from 'ACTIONS_MODULE0'\nexport {deleteSupporterAction as '40eac28d2574b9554a9164a8805edcf485b2c15502'} from 'ACTIONS_MODULE0'\n"],"names":["registerServerReference","ensureServerEntryExports","actions","i","length","action","Error"],"mappings":"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","ignoreList":[0,1,4]}