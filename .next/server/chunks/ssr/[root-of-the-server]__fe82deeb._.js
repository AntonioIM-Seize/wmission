module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},62212,a=>{a.n(a.i(66114))},65893,a=>{a.n(a.i(68852))},71859,a=>{"use strict";a.s(["Alert",()=>f,"AlertDescription",()=>h,"AlertTitle",()=>g]);var b=a.i(7997),c=a.i(96942),d=a.i(82248);let e=(0,c.cva)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function f({className:a,variant:c,...f}){return(0,b.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,d.cn)(e({variant:c}),a),...f})}function g({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"alert-title",className:(0,d.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",a),...c})}function h({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"alert-description",className:(0,d.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",a),...c})}},58903,a=>{"use strict";a.s(["Separator",()=>b]);let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call Separator() from the server but Separator is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/ui/separator.tsx <module evaluation>","Separator")},19665,a=>{"use strict";a.s(["Separator",()=>b]);let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call Separator() from the server but Separator is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/ui/separator.tsx","Separator")},20407,a=>{"use strict";a.i(58903);var b=a.i(19665);a.n(b)},55747,a=>{"use strict";a.s(["formatDate",()=>c]);var b=a.i(14617);function c(a,d=b.DEFAULT_LANGUAGE){if(!a)return"";let e=a instanceof Date?a:new Date(a);return Number.isNaN(e.getTime())?"":new Intl.DateTimeFormat(d,{year:"numeric",month:"short",day:"numeric"}).format(e)}},29171,a=>{"use strict";a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardFooter",()=>i,"CardHeader",()=>e,"CardTitle",()=>f]);var b=a.i(7997),c=a.i(82248);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}function i({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-footer",className:(0,c.cn)("flex items-center px-6 [.border-t]:pt-6",a),...d})}},52079,a=>{"use strict";a.s(["loginSchema",()=>e,"profileUpdateSchema",()=>f,"registerSchema",()=>d]);var b=a.i(83111);let c=b.z.string().min(8,"비밀번호는 8자 이상이어야 합니다.").regex(/[A-Z]/,"대문자를 최소 한 글자 포함해야 합니다.").regex(/[a-z]/,"소문자를 최소 한 글자 포함해야 합니다.").regex(/\d/,"숫자를 최소 한 글자 포함해야 합니다.").regex(/[^A-Za-z0-9]/,"특수문자를 최소 한 글자 포함해야 합니다."),d=b.z.object({email:b.z.string().email("유효한 이메일 주소를 입력해주세요."),password:c,passwordConfirm:b.z.string(),fullName:b.z.string().min(2,"이름은 2자 이상이어야 합니다."),phone:b.z.string().regex(/^[0-9+\-() ]+$/,"전화번호 형식이 올바르지 않습니다.").optional().or(b.z.literal("").transform(()=>void 0)),joinReason:b.z.string().min(10,"가입 이유는 10자 이상 작성해주세요.")}).refine(a=>a.password===a.passwordConfirm,{path:["passwordConfirm"],message:"비밀번호 확인이 일치하지 않습니다."}),e=b.z.object({email:b.z.string().email("이메일 형식이 올바르지 않습니다."),password:b.z.string().min(1,"비밀번호를 입력해주세요.")}),f=b.z.object({fullName:b.z.string().min(2,"이름은 2자 이상이어야 합니다."),phone:b.z.string().regex(/^[0-9+\-() ]+$/,"전화번호 형식이 올바르지 않습니다.").optional().or(b.z.literal("").transform(()=>void 0)),joinReason:b.z.string().min(10,"가입 이유는 10자 이상 작성해주세요.")})},83521,a=>{"use strict";a.s(["006e87d2ba50d7749061e0234a2c5ee819ab969621",()=>j.signOutAction,"40786452cab13edafc11e622b0d3615307be8fc2cd",()=>i],83521),a.s([],8392);var b=a.i(42998),c=a.i(37936),d=a.i(18558);a.i(70396);var e=a.i(73727),f=a.i(53058),g=a.i(98310),h=a.i(52079);async function i(a){let b=await (0,f.getCurrentProfile)();b||(0,e.redirect)("/login?redirectTo=/account");let c=h.profileUpdateSchema.safeParse(a);if(!c.success)return{status:"error",message:"입력값을 확인해주세요.",fieldErrors:c.error.flatten().fieldErrors};let i=await (0,g.createSupabaseServerClient)(),j=c.data,k={full_name:j.fullName.trim(),phone:j.phone?j.phone.trim():null,join_reason:j.joinReason.trim()},{error:l}=await i.from("profiles").update(k).eq("id",b.id);if(l)return console.error("프로필 업데이트 실패",l),{status:"error",message:"프로필을 저장하지 못했습니다. 잠시 후 다시 시도해주세요."};(0,d.revalidatePath)("/account"),(0,d.revalidatePath)("/","layout")}(0,a.i(13095).ensureServerEntryExports)([i]),(0,c.registerServerReference)(i,"40786452cab13edafc11e622b0d3615307be8fc2cd",null),a.i(8392);var j=b},64763,a=>{"use strict";a.s(["ProfileForm",()=>b]);let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call ProfileForm() from the server but ProfileForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/forms/profile-form.tsx <module evaluation>","ProfileForm")},24195,a=>{"use strict";a.s(["ProfileForm",()=>b]);let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call ProfileForm() from the server but ProfileForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/forms/profile-form.tsx","ProfileForm")},65446,a=>{"use strict";a.i(64763);var b=a.i(24195);a.n(b)},37189,a=>{"use strict";a.s(["default",()=>n,"metadata",()=>m]);var b=a.i(7997);a.i(70396);var c=a.i(73727),d=a.i(40088),e=a.i(29171),f=a.i(20407),g=a.i(71859),h=a.i(65446),i=a.i(53058),j=a.i(77049),k=a.i(63250),l=a.i(55747);let m={title:"내 정보 | 위루다 선교 공동체",description:"회원 정보와 승인 상태를 확인하고 연락처를 수정할 수 있습니다."};async function n(){let a=await (0,i.getCurrentProfile)();a||(0,c.redirect)("/login?redirectTo=/account");let m=await (0,i.getCurrentSession)(),n=await (0,j.detectInitialLanguage)(),o=(0,k.isPending)(a.status)?{title:"승인 대기 중입니다",description:"관리자가 정보를 검토 중입니다. 승인 완료 후 묵상과 기도 글을 작성하실 수 있습니다.",variant:"default"}:(0,k.isApproved)(a.status)?null:{title:"계정 상태를 확인해주세요",description:"승인이 거절되었거나 제한된 상태입니다. 관리자에게 문의해주세요.",variant:"destructive"},p={fullName:a.full_name,phone:a.phone??"",joinReason:a.join_reason??""};return(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold text-slate-900",children:"내 정보"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"승인 상태와 역할을 확인하고, 공동체 운영팀에 공유되는 연락처 정보를 수정할 수 있습니다."})]}),o&&(0,b.jsxs)(g.Alert,{variant:o.variant,children:[(0,b.jsx)(g.AlertTitle,{children:o.title}),(0,b.jsx)(g.AlertDescription,{children:o.description})]}),(0,b.jsxs)("section",{className:"grid gap-6 md:grid-cols-2",children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)(e.CardTitle,{className:"text-base text-muted-foreground",children:"회원 상태"})}),(0,b.jsxs)(e.CardContent,{className:"space-y-4 text-sm text-muted-foreground",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-xs uppercase tracking-wide",children:"이름"}),(0,b.jsx)("p",{className:"text-base font-semibold text-slate-900",children:a.full_name||"이름 미입력"})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-xs uppercase tracking-wide",children:"상태"}),(0,b.jsx)(d.Badge,{variant:"secondary",children:(0,k.getProfileStatusLabel)(a.status)})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-xs uppercase tracking-wide",children:"역할"}),(0,b.jsx)("p",{className:"font-medium text-slate-900",children:(0,k.getUserRoleLabel)(a.role)})]}),(0,b.jsxs)("div",{className:"grid gap-1 text-xs",children:[(0,b.jsxs)("p",{children:["가입일: ",(0,l.formatDate)(a.created_at,n)]}),a.approved_at&&(0,b.jsxs)("p",{children:["승인일: ",(0,l.formatDate)(a.approved_at,n)]}),a.last_login_at&&(0,b.jsxs)("p",{children:["마지막 로그인: ",(0,l.formatDate)(a.last_login_at,n)]})]})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)(e.CardTitle,{className:"text-base text-muted-foreground",children:"계정 & 보안"})}),(0,b.jsxs)(e.CardContent,{className:"space-y-4 text-sm text-muted-foreground",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-xs uppercase tracking-wide",children:"이메일"}),(0,b.jsx)("p",{className:"font-medium text-slate-900",children:m?.user?.email??"확인되지 않은 계정"})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-xs uppercase tracking-wide",children:"Supabase ID"}),(0,b.jsx)("p",{className:"font-mono text-xs text-muted-foreground",children:a.id})]}),(0,b.jsx)("p",{className:"rounded-lg border border-dashed border-border/60 bg-muted/30 p-3 text-xs leading-relaxed",children:"로그인 정보는 Supabase Auth에서 안전하게 관리되며, 비밀번호 재설정은 로그인 화면에서 이메일 인증을 통해 진행됩니다."})]})]})]}),(0,b.jsx)(f.Separator,{}),(0,b.jsx)(h.ProfileForm,{initialValues:p})]})}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__fe82deeb._.js.map