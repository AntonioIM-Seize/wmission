module.exports=[37936,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"registerServerReference",{enumerable:!0,get:function(){return d.registerServerReference}});let d=a.r(11857)},13095,(a,b,c)=>{"use strict";function d(a){for(let b=0;b<a.length;b++){let c=a[b];if("function"!=typeof c)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof c}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ensureServerEntryExports",{enumerable:!0,get:function(){return d}})},71859,a=>{"use strict";a.s(["Alert",()=>f,"AlertDescription",()=>h,"AlertTitle",()=>g]);var b=a.i(7997),c=a.i(96942),d=a.i(82248);let e=(0,c.cva)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function f({className:a,variant:c,...f}){return(0,b.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,d.cn)(e({variant:c}),a),...f})}function g({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"alert-title",className:(0,d.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",a),...c})}function h({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"alert-description",className:(0,d.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",a),...c})}},93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},62212,a=>{a.n(a.i(66114))},43710,a=>{a.n(a.i(13954))},40088,a=>{"use strict";a.s(["Badge",()=>g]);var b=a.i(7997),c=a.i(89246),d=a.i(96942),e=a.i(82248);let f=(0,d.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function g({className:a,variant:d,asChild:g=!1,...h}){let i=g?c.Slot:"span";return(0,b.jsx)(i,{"data-slot":"badge",className:(0,e.cn)(f({variant:d}),a),...h})}},58903,a=>{"use strict";a.s(["Separator",()=>b]);let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call Separator() from the server but Separator is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/ui/separator.tsx <module evaluation>","Separator")},19665,a=>{"use strict";a.s(["Separator",()=>b]);let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call Separator() from the server but Separator is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/ui/separator.tsx","Separator")},20407,a=>{"use strict";a.i(58903);var b=a.i(19665);a.n(b)},55747,a=>{"use strict";a.s(["formatDate",()=>c]);var b=a.i(14617);function c(a,d=b.DEFAULT_LANGUAGE){if(!a)return"";let e=a instanceof Date?a:new Date(a);return Number.isNaN(e.getTime())?"":new Intl.DateTimeFormat(d,{year:"numeric",month:"short",day:"numeric"}).format(e)}},29171,a=>{"use strict";a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardFooter",()=>i,"CardHeader",()=>e,"CardTitle",()=>f]);var b=a.i(7997),c=a.i(82248);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}function i({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-footer",className:(0,c.cn)("flex items-center px-6 [.border-t]:pt-6",a),...d})}},6499,a=>{"use strict";a.s(["updateInquiryStatusAction",()=>i]);var b=a.i(37936),c=a.i(18558),d=a.i(53058),e=a.i(98310),f=a.i(11388),g=a.i(13095);let h=["pending","resolved"];async function i(a){await (0,d.requireRole)("admin");let b=a.get("inquiryId"),g=a.get("status");if("string"!=typeof b||"string"!=typeof g||!h.includes(g))return void(0,f.logError)("문의 상태 변경 실패 - 잘못된 입력값",{inquiryId:b,nextStatus:g});let i=await (0,e.createSupabaseServerClient)(),{error:j}=await i.from("inquiries").update({status:g,responded_at:"resolved"===g?new Date().toISOString():null}).eq("id",b);if(j)return void(0,f.logError)("문의 상태 업데이트 실패",{error:j,inquiryId:b,status:g});(0,c.revalidatePath)("/admin/inquiries")}(0,g.ensureServerEntryExports)([i]),(0,b.registerServerReference)(i,"4013e25727dda5af42aae56b0cd29e64e9989c9600",null)},36279,a=>{"use strict";a.s(["4013e25727dda5af42aae56b0cd29e64e9989c9600",()=>c.updateInquiryStatusAction],36279),a.s([],1335);var b=a.i(6499);a.i(1335);var c=b},36297,a=>{"use strict";a.s(["default",()=>m]);var b=a.i(7997),c=a.i(97647),d=a.i(71859),e=a.i(40088),f=a.i(43917),g=a.i(29171),h=a.i(20407),i=a.i(6499),j=a.i(98310),k=a.i(55747);let l=[{label:"전체",value:"all"},{label:"대기",value:"pending"},{label:"처리 완료",value:"resolved"}];async function m({searchParams:a}){let c=l.some(b=>b.value===a.status)?a.status:"all",e=await (0,j.createSupabaseServerClient)(),[f,g,i]=await Promise.all(["all"===c?e.from("inquiries").select("*").order("created_at",{ascending:!1}):e.from("inquiries").select("*").eq("status","pending"===c?"pending":"resolved").order("created_at",{ascending:!1}),e.from("inquiries").select("id",{count:"exact",head:!0}).eq("status","pending"),e.from("inquiries").select("id",{count:"exact",head:!0})]);f.error&&console.error("문의 목록 조회 실패",f.error),g.error&&console.error("문의 카운트 조회 실패",g.error);let k=f.data??[],m=i.count??k.length,q=g.count??k.filter(a=>"pending"===a.status).length;return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("header",{className:"space-y-2",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"문의 관리"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"방문자 문의를 확인하고 처리 상태를 업데이트합니다."})]}),(0,b.jsxs)("section",{className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsx)(n,{title:"총 문의",value:`${m}건`,description:"누적 접수된 문의"}),(0,b.jsx)(n,{title:"미해결",value:`${q}건`,description:"처리가 필요한 문의"}),(0,b.jsx)(n,{title:"처리 완료",value:`${Math.max(m-q,0)}건`,description:"답변이 완료된 문의"})]}),(0,b.jsx)(h.Separator,{}),(0,b.jsx)(o,{activeStatus:c}),0===k.length?(0,b.jsx)(d.Alert,{children:(0,b.jsx)(d.AlertDescription,{children:"해당 조건에 맞는 문의가 없습니다."})}):(0,b.jsx)("div",{className:"space-y-3",children:k.map(a=>(0,b.jsx)(p,{inquiry:a},a.id))})]})}function n({title:a,value:c,description:d}){return(0,b.jsxs)(g.Card,{className:"border border-border/60 bg-white p-4 shadow-sm",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a}),(0,b.jsx)("p",{className:"text-2xl font-semibold text-slate-900",children:c}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:d})]})}function o({activeStatus:a}){return(0,b.jsx)("div",{className:"flex flex-wrap items-center gap-2",children:l.map(d=>(0,b.jsx)(f.Button,{asChild:!0,variant:d.value===a?"default":"outline",size:"sm",children:(0,b.jsx)(c.default,{href:`/admin/inquiries?status=${d.value}`,children:d.label})},d.value))})}function p({inquiry:a}){let d="pending"===a.status?"대기":"처리 완료",j="pending"===a.status?"outline":"secondary";return(0,b.jsxs)(g.Card,{className:"border border-border/60 shadow-sm",children:[(0,b.jsxs)(g.CardHeader,{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(g.CardTitle,{className:"text-base text-slate-900",children:a.name}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-xs text-muted-foreground",children:[(0,b.jsx)("a",{className:"text-primary hover:underline",href:`mailto:${a.email}`,children:a.email}),a.phone&&(0,b.jsxs)("span",{children:["· ",a.phone]}),(0,b.jsxs)("span",{children:["· 접수 ",(0,k.formatDate)(a.created_at)]}),a.responded_at&&(0,b.jsxs)("span",{children:["· 답변 ",(0,k.formatDate)(a.responded_at)]})]})]}),(0,b.jsx)(e.Badge,{variant:j,children:d})]}),(0,b.jsxs)(g.CardContent,{className:"space-y-4 text-sm leading-relaxed text-slate-800",children:[(0,b.jsx)("p",{className:"whitespace-pre-line",children:a.message}),(0,b.jsx)(h.Separator,{}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsx)(f.Button,{asChild:!0,variant:"outline",size:"sm",children:(0,b.jsx)(c.default,{href:`mailto:${a.email}?subject=${encodeURIComponent("위루다 문의에 대한 답변")}`,children:"메일 답장하기"})}),(0,b.jsxs)("form",{action:i.updateInquiryStatusAction,children:[(0,b.jsx)("input",{type:"hidden",name:"inquiryId",value:a.id}),(0,b.jsx)("input",{type:"hidden",name:"status",value:"pending"===a.status?"resolved":"pending"}),(0,b.jsx)(f.Button,{type:"submit",variant:"pending"===a.status?"default":"outline",size:"sm",children:"pending"===a.status?"처리 완료로 표시":"대기 상태로 변경"})]})]})]})]})}},16407,a=>{a.v(a=>Promise.resolve().then(()=>a(89431)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__6389838b._.js.map