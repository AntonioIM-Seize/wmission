module.exports=[37936,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"registerServerReference",{enumerable:!0,get:function(){return d.registerServerReference}});let d=a.r(11857)},13095,(a,b,c)=>{"use strict";function d(a){for(let b=0;b<a.length;b++){let c=a[b];if("function"!=typeof c)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof c}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ensureServerEntryExports",{enumerable:!0,get:function(){return d}})},44066,a=>{"use strict";async function b(a,c,d={}){let e=function(a){if(!a)return null;try{let b=new URL(a).pathname.split("/").filter(Boolean),c=b.findIndex(a=>"public"===a);if(-1===c)return null;let d=decodeURIComponent(b[c+1]??""),e=b.slice(c+2).map(a=>decodeURIComponent(a)).join("/");if(!d||!e)return null;return{bucket:d,path:e}}catch(a){return console.error("공개 스토리지 URL 파싱 실패",a),null}}(c);if(!e)return;let f=d.expectedBucket??"content-images";if(f&&e.bucket!==f)return;let{error:g}=await a.storage.from(e.bucket).remove([e.path]);g&&console.error("스토리지 객체 삭제 실패",g)}a.s(["removePublicStorageFile",()=>b])},93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},62212,a=>{a.n(a.i(66114))},43710,a=>{a.n(a.i(13954))},85633,a=>{a.n(a.i(62134))},23881,a=>{"use strict";a.s(["deleteDevotionAdminAction",()=>h]);var b=a.i(37936),c=a.i(18558),d=a.i(53058),e=a.i(98310),f=a.i(11388),g=a.i(44066);async function h(a){await (0,d.requireRole)("admin");let b=a.get("devotionId");if("string"!=typeof b)throw Error("잘못된 요청입니다.");let h=await (0,e.createSupabaseServerClient)(),{data:i,error:j}=await h.from("devotions").select("id,image_url").match({id:b}).maybeSingle();j&&(0,f.logError)("관리자 묵상 삭제 전 조회 실패",{error:j,devotionId:b});let{error:k}=await h.from("devotions").delete().match({id:b});if(k)throw(0,f.logError)("관리자 묵상 삭제 실패",{error:k,devotionId:b}),Error("묵상을 삭제하지 못했습니다.");let l=i?.image_url??null;l&&await (0,g.removePublicStorageFile)(h,l),(0,c.revalidatePath)("/admin/devotions"),(0,c.revalidatePath)(`/admin/devotions/${b}`)}(0,a.i(13095).ensureServerEntryExports)([h]),(0,b.registerServerReference)(h,"40328e69a8742da95755898822bad7c69b676d071a",null)},59055,a=>{"use strict";a.s(["40328e69a8742da95755898822bad7c69b676d071a",()=>c.deleteDevotionAdminAction],59055),a.s([],84015);var b=a.i(23881);a.i(84015);var c=b},55035,a=>{"use strict";a.s(["default",()=>k]);var b=a.i(7997),c=a.i(3236);a.i(70396);var d=a.i(73727),e=a.i(43917),f=a.i(20407),g=a.i(78137),h=a.i(77049),i=a.i(55747),j=a.i(23881);async function k({params:a}){let k=await (0,h.detectInitialLanguage)(),l=await (0,g.getDevotionById)(a.id);return l||(0,d.notFound)(),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"묵상 상세 관리"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"작성자 정보를 확인하고 필요 시 묵상을 삭제할 수 있습니다."})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(e.Button,{asChild:!0,variant:"outline",children:(0,b.jsx)("a",{href:`/devotion/${l.id}`,target:"_blank",rel:"noreferrer",children:"공개본 보기"})}),(0,b.jsxs)("form",{action:j.deleteDevotionAdminAction,children:[(0,b.jsx)("input",{type:"hidden",name:"devotionId",value:l.id}),(0,b.jsx)(e.Button,{type:"submit",variant:"destructive",children:"삭제"})]})]})]}),(0,b.jsx)(f.Separator,{}),l.imageUrl&&(0,b.jsx)("div",{className:"relative h-64 overflow-hidden rounded-2xl border border-border/60",children:(0,b.jsx)(c.default,{src:l.imageUrl,alt:"묵상 대표 이미지",fill:!0,className:"object-cover",sizes:"(min-width: 1024px) 50vw, 100vw"})}),(0,b.jsxs)("section",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"작성일"}),(0,b.jsx)("p",{className:"text-sm text-slate-900",children:(0,i.formatDate)(l.publishedAt,k)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"제목"}),(0,b.jsx)("p",{className:"text-lg font-semibold text-slate-900",children:l.title})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"성경 구절"}),(0,b.jsx)("p",{className:"font-medium text-slate-900",children:l.scriptureRef}),(0,b.jsx)("p",{className:"mt-2 rounded-lg bg-muted/30 p-4 text-sm text-muted-foreground",children:l.scriptureText})]}),(0,b.jsx)("article",{className:"prose prose-slate max-w-none rounded-xl border border-border/60 bg-white p-6",children:(0,b.jsx)("div",{dangerouslySetInnerHTML:{__html:l.body}})})]}),(0,b.jsx)(f.Separator,{}),(0,b.jsxs)("section",{className:"space-y-2 text-sm text-muted-foreground",children:[(0,b.jsx)("p",{className:"font-semibold text-slate-900",children:"작성자 정보"}),(0,b.jsxs)("p",{children:["이름: ",l.authorName]}),(0,b.jsxs)("p",{children:["역할: ",l.authorRole]}),(0,b.jsxs)("p",{children:["상태: ",l.authorStatus]}),(0,b.jsxs)("p",{children:["조회수: ",l.views]})]})]})}},16407,a=>{a.v(a=>Promise.resolve().then(()=>a(89431)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__9944bc11._.js.map