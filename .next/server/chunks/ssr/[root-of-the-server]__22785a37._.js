module.exports=[29171,a=>{"use strict";a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardFooter",()=>i,"CardHeader",()=>e,"CardTitle",()=>f]);var b=a.i(7997),c=a.i(82248);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}function i({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-footer",className:(0,c.cn)("flex items-center px-6 [.border-t]:pt-6",a),...d})}},71859,a=>{"use strict";a.s(["Alert",()=>f,"AlertDescription",()=>h,"AlertTitle",()=>g]);var b=a.i(7997),c=a.i(96942),d=a.i(82248);let e=(0,c.cva)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function f({className:a,variant:c,...f}){return(0,b.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,d.cn)(e({variant:c}),a),...f})}function g({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"alert-title",className:(0,d.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",a),...c})}function h({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"alert-description",className:(0,d.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",a),...c})}},93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},62212,a=>{a.n(a.i(66114))},43710,a=>{a.n(a.i(13954))},22605,a=>{"use strict";a.s(["Input",()=>d]);var b=a.i(7997),c=a.i(82248);function d({className:a,type:d,...e}){return(0,b.jsx)("input",{type:d,"data-slot":"input",className:(0,c.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...e})}},1269,a=>{"use strict";a.s(["default",()=>g],1269);var b=a.i(717);let c=a=>{let b=a.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,b,c)=>c?c.toUpperCase():b.toLowerCase());return b.charAt(0).toUpperCase()+b.slice(1)},d=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let f=(0,b.forwardRef)(({color:a="currentColor",size:c=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...e,width:c,height:c,stroke:a,strokeWidth:g?24*Number(f)/Number(c):f,className:d("lucide",h),...!i&&!(a=>{for(let b in a)if(b.startsWith("aria-")||"role"===b||"title"===b)return!0})(k)&&{"aria-hidden":"true"},...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),g=(a,e)=>{let g=(0,b.forwardRef)(({className:g,...h},i)=>(0,b.createElement)(f,{ref:i,iconNode:e,className:d(`lucide-${c(a).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${a}`,g),...h}));return g.displayName=c(a),g}},89365,a=>{"use strict";a.s(["DevotionCard",()=>k],89365);var b=a.i(7997),c=a.i(97647),d=a.i(3236),e=a.i(1269);let f=(0,e.default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),g=(0,e.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var h=a.i(29171),i=a.i(43917),j=a.i(55747);function k({devotion:a,language:e}){return(0,b.jsxs)(h.Card,{className:"h-full border border-border/60",children:[(0,b.jsxs)(h.CardHeader,{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2 text-xs text-muted-foreground",children:[a.publishedAt&&(0,b.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,b.jsx)(f,{className:"h-3 w-3"}),(0,j.formatDate)(a.publishedAt,e)]}),"number"==typeof a.views&&(0,b.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,b.jsx)(g,{className:"h-3 w-3"}),a.views]})]}),(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:a.scriptureRef}),(0,b.jsx)(h.CardTitle,{className:"text-lg",children:a.title})]}),a.imageUrl&&(0,b.jsx)("div",{className:"relative h-40 w-full overflow-hidden",children:(0,b.jsx)(d.default,{src:a.imageUrl,alt:"묵상 대표 이미지",fill:!0,className:"object-cover",sizes:"(min-width: 768px) 33vw, 100vw"})}),(0,b.jsx)(h.CardContent,{children:(0,b.jsx)("p",{className:"line-clamp-3 text-sm leading-relaxed text-muted-foreground",children:a.excerpt})}),(0,b.jsxs)(h.CardFooter,{className:"flex flex-col gap-3",children:[(0,b.jsx)("div",{className:"flex w-full items-center justify-between text-xs text-muted-foreground",children:(0,b.jsxs)("span",{children:["작성자: ",a.authorName??"익명"]})}),(0,b.jsx)(i.Button,{asChild:!0,variant:"secondary",size:"sm",className:"w-full",children:(0,b.jsx)(c.default,{href:`/devotion/${a.id}`,children:"자세히 보기"})})]})]})}},85633,a=>{a.n(a.i(62134))},68878,(a,b,c)=>{},58403,a=>{"use strict";a.s(["default",()=>l]);var b=a.i(7997),c=a.i(97647),d=a.i(71859),e=a.i(43917),f=a.i(29171),g=a.i(22605),h=a.i(20407),i=a.i(89365),j=a.i(77049),k=a.i(78137);async function l({searchParams:a}){var f;let g=await (0,j.detectInitialLanguage)(),l=a.q?.trim()??"",t=Math.max(Number(a.page??"1")||1,1),u=s(a.startDate)?a.startDate:"",v=s(a.endDate)?a.endDate:"",w="with"===(f=a.hasImage)||"without"===f?f:"all",x=!!(u&&v&&u>v),y=x?Promise.resolve({items:[],total:0,page:t,pageSize:12}):(0,k.getDevotionsList)({page:t,pageSize:12,filters:{search:l||void 0,startDate:u||void 0,endDate:v||void 0,hasImage:w}}),[z,A,{items:B,total:C}]=await Promise.all([(0,k.getDevotionAdminMetrics)(),(0,k.getDevotionMonthlySummary)(),y]),D=Math.max(Math.ceil(C/12),1),E=function(a){let b=[];return a.query&&b.push(`검색: ${a.query}`),a.startDate&&b.push(`시작일: ${a.startDate}`),a.endDate&&b.push(`종료일: ${a.endDate}`),"with"===a.hasImage?b.push("이미지 포함"):"without"===a.hasImage&&b.push("이미지 없음"),b}({query:l,startDate:u,endDate:v,hasImage:w}),F=x?null:function(a){let b=new URLSearchParams;a.query&&b.set("q",a.query),a.startDate&&b.set("startDate",a.startDate),a.endDate&&b.set("endDate",a.endDate),a.hasImage&&"all"!==a.hasImage&&b.set("hasImage",a.hasImage);let c=b.toString();return c?`/admin/devotions/export?${c}`:"/admin/devotions/export"}({query:l,startDate:u,endDate:v,hasImage:w});return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"묵상 관리"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"작성된 묵상을 검토하고 필요 시 삭제하세요."})]}),(0,b.jsx)(e.Button,{asChild:!0,variant:"outline",children:(0,b.jsx)(c.default,{href:"/devotion",children:"공개 페이지 보기"})})]}),(0,b.jsxs)("section",{className:"grid gap-3 md:grid-cols-5",children:[(0,b.jsx)(m,{title:"전체 묵상",value:z.total.toLocaleString(g),description:"등록된 전체 묵상 수"}),(0,b.jsx)(m,{title:"최근 30일 등록",value:z.last30Days.toLocaleString(g),description:"최근 한 달간 신규 묵상"}),(0,b.jsx)(m,{title:"이미지 포함",value:z.withImage.toLocaleString(g),description:"대표 이미지가 있는 묵상"}),(0,b.jsx)(m,{title:"누적 조회수",value:z.totalViews.toLocaleString(g),description:"전체 조회 합계"}),(0,b.jsx)(m,{title:"참여 작성자",value:z.uniqueAuthors.toLocaleString(g),description:"묵상을 등록한 고유 작성자 수"})]}),(0,b.jsx)(n,{defaults:{query:l,startDate:u,endDate:v,hasImage:w},exportHref:F,disableExport:x}),x&&(0,b.jsxs)(d.Alert,{variant:"destructive",children:[(0,b.jsx)(d.AlertTitle,{children:"날짜 범위 오류"}),(0,b.jsx)(d.AlertDescription,{children:"시작일이 종료일보다 늦습니다. 날짜 범위를 다시 선택해주세요."})]}),E.length>0&&(0,b.jsx)(o,{filters:E}),(0,b.jsx)(h.Separator,{}),z.topDevotion&&(0,b.jsx)(p,{summary:z.topDevotion,language:g}),A.length>0&&(0,b.jsx)(q,{rows:A,language:g}),(0,b.jsx)(h.Separator,{}),B.length?(0,b.jsx)("div",{className:"grid gap-6 md:grid-cols-2 xl:grid-cols-3",children:B.map(a=>(0,b.jsxs)("div",{className:"space-y-3 rounded-xl border border-border/60 bg-white p-4 shadow-sm",children:[(0,b.jsx)(i.DevotionCard,{devotion:a,language:g}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(e.Button,{asChild:!0,variant:"outline",size:"sm",className:"w-full",children:(0,b.jsx)(c.default,{href:`/devotion/${a.id}`,children:"상세 보기"})}),(0,b.jsx)(e.Button,{asChild:!0,variant:"destructive",size:"sm",className:"w-full",children:(0,b.jsx)(c.default,{href:`/admin/devotions/${a.id}`,children:"관리"})})]})]},a.id))}):(0,b.jsx)("div",{className:"rounded-xl border border-dashed border-border/60 bg-muted/20 p-8 text-center text-sm text-muted-foreground",children:"검색 조건에 해당하는 묵상이 없습니다."}),(0,b.jsx)(r,{page:t,totalPages:D,query:l,startDate:u,endDate:v,hasImage:w})]})}function m({title:a,value:c,description:d}){return(0,b.jsxs)(f.Card,{className:"bg-white",children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{className:"text-sm font-semibold text-muted-foreground",children:a}),(0,b.jsx)(f.CardDescription,{children:d})]}),(0,b.jsx)(f.CardContent,{children:(0,b.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:c})})]})}function n({defaults:a,exportHref:d,disableExport:f}){return(0,b.jsxs)("form",{className:"space-y-3 rounded-xl border border-border/60 bg-muted/20 p-4",action:"/admin/devotions",children:[(0,b.jsxs)("div",{className:"grid gap-3 md:grid-cols-5",children:[(0,b.jsx)(g.Input,{name:"q",placeholder:"제목 또는 구절 검색",defaultValue:a.query,className:"md:col-span-2"}),(0,b.jsx)(g.Input,{name:"startDate",type:"date",defaultValue:a.startDate}),(0,b.jsx)(g.Input,{name:"endDate",type:"date",defaultValue:a.endDate}),(0,b.jsxs)("select",{name:"hasImage",defaultValue:a.hasImage,className:"h-9 rounded-md border border-input bg-transparent px-3 text-sm shadow-xs outline-none transition focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50",children:[(0,b.jsx)("option",{value:"all",children:"이미지 여부 전체"}),(0,b.jsx)("option",{value:"with",children:"이미지 있음"}),(0,b.jsx)("option",{value:"without",children:"이미지 없음"})]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap justify-end gap-2",children:[(0,b.jsx)(e.Button,{type:"submit",children:"필터 적용"}),(0,b.jsx)(e.Button,{asChild:!0,variant:"outline",children:(0,b.jsx)(c.default,{href:"/admin/devotions",children:"초기화"})}),d&&!f?(0,b.jsx)(e.Button,{asChild:!0,variant:"secondary",children:(0,b.jsx)("a",{href:d,children:"CSV 내보내기"})}):(0,b.jsx)(e.Button,{variant:"secondary",disabled:!0,children:"CSV 내보내기"})]})]})}function o({filters:a}){return(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2 rounded-xl border border-border/60 bg-muted/10 p-4 text-xs text-muted-foreground",children:[(0,b.jsx)("span",{className:"font-medium text-slate-900",children:"적용된 필터"}),a.map(a=>(0,b.jsx)("span",{className:"rounded-full border border-border/60 bg-white px-3 py-1 text-xs font-medium text-slate-700",children:a},a))]})}function p({summary:a,language:d}){return(0,b.jsxs)(f.Card,{className:"border border-emerald-200 bg-emerald-50/80",children:[(0,b.jsxs)(f.CardHeader,{className:"flex flex-col gap-1",children:[(0,b.jsx)(f.CardTitle,{className:"text-sm font-semibold text-emerald-700",children:"가장 많이 읽힌 묵상"}),(0,b.jsx)(f.CardDescription,{children:"조회수가 가장 높은 최신 묵상을 빠르게 확인하세요."})]}),(0,b.jsxs)(f.CardContent,{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-base font-semibold text-slate-900",children:a.title}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["조회수 ",a.views.toLocaleString(d)," · 게시일 ",function(a,b){try{return new Intl.DateTimeFormat(b,{year:"numeric",month:"short",day:"numeric"}).format(new Date(a))}catch{return a}}(a.publishedAt,d)]})]}),(0,b.jsx)(e.Button,{asChild:!0,variant:"secondary",size:"sm",children:(0,b.jsx)(c.default,{href:`/admin/devotions/${a.id}`,children:"관리 페이지로 이동"})})]})]})}function q({rows:a,language:c}){return(0,b.jsxs)("section",{className:"rounded-xl border border-border/60 bg-white p-6 shadow-sm",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-slate-900",children:"최근 6개월 월간 요약"}),(0,b.jsx)("p",{className:"mt-1 text-xs text-muted-foreground",children:"월별 등록 건수와 조회수를 확인하세요."}),(0,b.jsx)("div",{className:"mt-4 overflow-hidden rounded-lg border border-border/40",children:(0,b.jsxs)("table",{className:"min-w-full text-sm",children:[(0,b.jsx)("thead",{className:"bg-muted/40 text-xs uppercase tracking-wide text-muted-foreground",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left",children:"월"}),(0,b.jsx)("th",{className:"px-4 py-3 text-right",children:"등록 건수"}),(0,b.jsx)("th",{className:"px-4 py-3 text-right",children:"누적 조회수"})]})}),(0,b.jsx)("tbody",{children:a.map(a=>(0,b.jsxs)("tr",{className:"border-t border-border/40",children:[(0,b.jsx)("td",{className:"px-4 py-3 font-medium text-slate-900",children:a.label}),(0,b.jsxs)("td",{className:"px-4 py-3 text-right text-muted-foreground",children:[a.count.toLocaleString(c),"건"]}),(0,b.jsxs)("td",{className:"px-4 py-3 text-right text-slate-900",children:[a.views.toLocaleString(c),"회"]})]},a.monthKey))})]})})]})}function r({page:a,totalPages:d,query:f,startDate:g,endDate:h,hasImage:i}){if(d<=1)return null;let j=new URLSearchParams;f&&j.set("q",f),g&&j.set("startDate",g),h&&j.set("endDate",h),i&&"all"!==i&&j.set("hasImage",i);let k=a=>{let b=new URLSearchParams(j);a>1&&b.set("page",String(a));let c=b.toString();return c?`/admin/devotions?${c}`:"/admin/devotions"};return(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-xl border border-border/60 bg-white p-4 text-sm",children:[(0,b.jsx)(e.Button,{asChild:!0,variant:"ghost",disabled:a<=1,children:(0,b.jsx)(c.default,{href:k(a-1),children:"이전"})}),(0,b.jsxs)("span",{className:"text-muted-foreground",children:[a," / ",d]}),(0,b.jsx)(e.Button,{asChild:!0,variant:"ghost",disabled:a>=d,children:(0,b.jsx)(c.default,{href:k(a+1),children:"다음"})})]})}function s(a){return!!a&&/^\d{4}-\d{2}-\d{2}$/.test(a)}},16407,a=>{a.v(a=>Promise.resolve().then(()=>a(89431)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__22785a37._.js.map